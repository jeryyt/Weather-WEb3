<div class="weather-container">
    <div class="search-section">
        <h2>Get Real-Time Weather Updates</h2>
        <p>Enter a city name to get current weather information</p>
        
        <form class="search-form" method="POST" action="/weather">
            <div class="search-input-group">
                <input 
                    type="text" 
                    name="city" 
                    id="city" 
                    placeholder="Enter city name (e.g., London, New York, Tokyo)"
                    class="search-input"
                    required
                >
                <button type="submit" class="search-btn">
                    <i class="fas fa-search"></i>
                    Search
                </button>
            </div>
        </form>
    </div>

    {{#if error}}
    <div class="error-message">
        <i class="fas fa-exclamation-triangle"></i>
        <p>{{error}}</p>
    </div>
    {{/if}}

    {{#if weather}}
    <div class="weather-card">
        <!-- Weather Animation Background -->
        <div class="weather-animation" data-weather="{{weather.description}}">
            <div class="animation-container"></div>
        </div>
        
        <div class="current-datetime">
            <div class="date">{{weather.current_date}}</div>
            <div class="time">{{weather.current_time}}</div>
        </div>
        
        <div class="weather-header">
            <div class="location">
                <h3>{{weather.city}}, {{weather.country}}</h3>
                <p class="description">{{weather.description}}</p>
            </div>
            <div class="weather-icon">
                <img src="http://openweathermap.org/img/wn/{{weather.icon}}@2x.png" alt="{{weather.description}}">
            </div>
        </div>
        
        <!-- Save/Remove Button -->
        <div class="save-place-section">
            {{#if isSaved}}
                <button class="save-btn remove-btn" data-city="{{weather.city}}" data-country="{{weather.country}}">
                    <i class="fas fa-heart"></i>
                    Remove from Favorites
                </button>
            {{else}}
                <button class="save-btn add-btn" data-city="{{weather.city}}" data-country="{{weather.country}}" 
                        data-temperature="{{weather.temperature}}" data-description="{{weather.description}}" 
                        data-icon="{{weather.icon}}">
                    <i class="far fa-heart"></i>
                    Add to Favorites
                </button>
            {{/if}}
        </div>

        <div class="weather-main">
            <div class="temperature">
                <span class="temp-value">{{weather.temperature}}°C</span>
                <span class="feels-like">Feels like {{weather.feels_like}}°C</span>
            </div>
        </div>

        <div class="weather-details">
            <div class="detail-item">
                <i class="fas fa-tint"></i>
                <div class="detail-content">
                    <span class="detail-label">Humidity</span>
                    <span class="detail-value">{{weather.humidity}}%</span>
                </div>
            </div>
            
            <div class="detail-item">
                <i class="fas fa-wind"></i>
                <div class="detail-content">
                    <span class="detail-label">Wind Speed</span>
                    <span class="detail-value">{{weather.wind_speed}} m/s</span>
                </div>
            </div>
            
            <div class="detail-item">
                <i class="fas fa-compress-alt"></i>
                <div class="detail-content">
                    <span class="detail-label">Pressure</span>
                    <span class="detail-value">{{weather.pressure}} hPa</span>
                </div>
            </div>
            
            <div class="detail-item">
                <i class="fas fa-eye"></i>
                <div class="detail-content">
                    <span class="detail-label">Visibility</span>
                    <span class="detail-value">{{weather.visibility}} km</span>
                </div>
            </div>
        </div>

        <div class="weather-sun">
            <div class="sun-item">
                <i class="fas fa-sunrise"></i>
                <span>Sunrise: {{weather.sunrise}}</span>
            </div>
            <div class="sun-item">
                <i class="fas fa-sunset"></i>
                <span>Sunset: {{weather.sunset}}</span>
            </div>
        </div>
    </div>
    {{/if}}
    
    <!-- Saved Places Section -->
    {{#if savedPlaces.length}}
    <div class="saved-places-section">
        <h3><i class="fas fa-star"></i> Your Favorite Places</h3>
        <div class="saved-places-grid">
            {{#each savedPlaces}}
            <div class="saved-place-card" data-city="{{this.city}}">
                <div class="saved-place-header">
                    <div class="saved-place-info">
                        <h4>{{this.city}}, {{this.country}}</h4>
                        <p class="saved-description">{{this.description}}</p>
                    </div>
                    <div class="saved-weather-icon">
                        <img src="http://openweathermap.org/img/wn/{{this.icon}}@2x.png" alt="{{this.description}}">
                    </div>
                </div>
                <div class="saved-place-temp">
                    <span class="saved-temp-value">{{this.temperature}}°C</span>
                </div>
                <div class="saved-place-actions">
                    <button class="refresh-btn" data-city="{{this.city}}">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="remove-saved-btn" data-city="{{this.city}}">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
    {{/if}}
</div>

<!-- Notification Container -->
<div id="notification-container"></div> 